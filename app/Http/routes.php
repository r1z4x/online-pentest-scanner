<?php

/*
|--------------------------------------------------------------------------
| Application Routes
|--------------------------------------------------------------------------
|
| Here is where you can register all of the routes for an application.
| It's a breeze. Simply tell Laravel the URIs it should respond to
| and give it the controller to call when that URI is requested.
|
*/

Route::group(['middleware' => 'auth'], function () {

	Route::get('/', [
		'as'				=> 'pages.dashboard',
		'uses'				=> 'Pages\DashboardController@getDashboard'	
	]);

	Route::get('users/profile', [
		'as'        => 'pages.users.profile',
		'uses'		=> 'Pages\UserController@profile'
	]);

	Route::resource('users', 'Pages\UserController', ['names' => [
	    'create' 	=> 'pages.users.create',
	    'store'		=> 'pages.users.store',
	    'destroy'	=> 'pages.users.destroy',
	    'show'		=> 'pages.users.show',
	    'edit'		=> 'pages.users.edit',
	    'update'	=> 'pages.users.update',
	    'index'		=> 'pages.users'
	]]);

	Route::get('companies/setting', [
		'as'        => 'pages.companies.setting',
		'uses'		=> 'Pages\CompanyController@setting'
	]);

	Route::post('companies/setting', [
		'as'        => 'pages.companies.setting',
		'uses'		=> 'Pages\CompanyController@storeSetting'
	]);

	Route::resource('companies', 'Pages\CompanyController', ['names' => [
	    'create' 	=> 'pages.companies.create',
	    'store'		=> 'pages.companies.store',
	    'destroy'	=> 'pages.companies.destroy',
	    'show'		=> 'pages.companies.show',
	    'edit'		=> 'pages.companies.edit',
	    'update'	=> 'pages.companies.update',
	    'index'		=> 'pages.companies'
	]]);

	Route::resource('scans', 'Pages\ScanController', ['names' => [
	    'create' 	=> 'pages.scans.create',
	    'store'		=> 'pages.scans.store',
	   	'destroy'	=> 'pages.scans.destroy',
	    'show'		=> 'pages.scans.show',
	    'edit'		=> 'pages.scans.edit',
	    'update'	=> 'pages.scans.update',
	    'index'		=> 'pages.scans'
	]]);

	Route::get('scans/create/{type?}', [
		'as'                => 'pages.scans.create',
		'uses'				=> 'Pages\ScanController@create'
	])->where([
		'type'	=> '(general-information|scan-settings|schedule-settings|completed)'
	]);

	Route::post('scans/create/{type?}', [
		'as'                => 'pages.scans.create',
		'uses'				=> 'Pages\ScanController@store'
	])->where([
		'type'	=> '(general-information|scan-settings|schedule-settings|completed)'
	]);

	/*
	 * API 
	 */

	Route::group(['prefix' => 'api'], function(){
		
		Route::post('scans/add-url', [
			'as'                => 'api.scans.add_url',
			'uses'				=> 'Pages\ScanController@postAPIAddScanURL'
		]);

	});
});


// Authentication routes...
Route::get('auth/login', [
	'as'                => 'auth.login',
	'uses'				=> 'Auth\AuthController@getLogin'
]);

Route::get('auth/register', [
	'as'                => 'auth.register',
	'uses'				=> 'Auth\AuthController@getRegister'
]);

Route::get('auth/forgot-password', [
	'as'                => 'auth.forgot',
	'uses'				=> 'Auth\AuthController@getForgotPassword'
]);

Route::post('auth/login', [
	'as'                => 'auth.login',
	'uses'				=> 'Auth\AuthController@postLogin'
]);

Route::get('auth/logout', [
	'as'                => 'auth.logout',
	'uses'				=> 'Auth\AuthController@getLogout'
]);