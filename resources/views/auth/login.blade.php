@extends('layouts.auth')

@section('title')
    {{ trans('auth.login.title') }}
@endsection

@section('container')
    <div class="row m-x-0">
        <div class="col-sm-8 col-sm-push-1 col-md-4 col-md-push-4 col-lg-4 col-lg-push-4">
            <div class="center m-a-2 p-a-2">
                <h4>
                    <i class="material-icons">security</i> {{ config()->get('custom.application.name') }}
                </h4>
            </div>

            @include('errors.validation')

            <div class="card bg-default">
                <div class="card-header bg-white center">
                    <h4 class="card-title">{{ trans('auth.login.title') }}</h4>
                    <p class="card-subtitle">{{ trans('auth.login.description') }}</p>
                </div>
                <div class="p-a-2">
                    <form action="{{ route('auth.login') }}" method="post">
                        <input type="hidden" name="_token" value="{{ csrf_token() }}">

                        <div class="form-group {{ $errors->has('email') ? 'has-danger' : '' }}">
                            <input name="email" type="email" class="form-control {{ $errors->has('email') ? 'form-control-danger' : '' }}" placeholder="{{ trans('auth.login.email') }}" value="{{ old('email') }}">
                        </div>
                        <div class="form-group {{ $errors->has('password') ? 'has-danger' : '' }}">
                            <input name="password" type="password" class="form-control {{ $errors->has('password') ? 'form-control-danger' : '' }}" placeholder="{{ trans('auth.login.password') }}">
                        </div>
                        
                        @if(
                            session()->has('captcha_fails_counter') 
                            && (int)session()->get('captcha_fails_counter') >= (int)config()->get('custom.settings.captcha_fails_limit')
                        )
                        <div class="form-group {{ $errors->has('captcha') ? 'has-danger' : '' }}">
                            <div class="text-lg-center img-responsive" style="margin-bottom:15px;"><img src="{{ captcha_src() }}" /></div>
                            <input name="captcha" type="text" class="form-control input-lg {{ $errors->has('captcha') ? 'form-control-danger' : '' }}" placeholder="{{ trans('auth.login.captcha') }}">
                        </div>
                        @endif

                        <div class="form-group row">

                            <div class="col-sm-5">
                                <button type="submit" class="btn  btn-primary btn-block btn-rounded">
                                    {{ trans('auth.login.signin') }}
                                </button>
                            </div>

                            <div class="col-sm-7" style="padding-top: 5px;">
                                <label class="c-input c-checkbox">
                                    <input name="remember" value="1" type="checkbox" checked="checked"> 
                                    <span class="c-indicator"></span> {{ trans('auth.login.remember') }}
                                </label>
                            </div>
                            
                        </div>
                        <div class="center">
                            <a href="#">
                                <small>{{ trans('auth.login.forgot') }}</small>
                            </a>
                        </div>
                    </form>
                </div>
                <div class="card-footer center bg-white">
                    {{ trans('auth.login.footer_text') }} <a href="{{ route('auth.register') }}">{{ trans('auth.login.signup') }}</a>
                </div>
            </div>

            <div class="text-lg-center">
                <small>&copy; {{ config()->get('custom.information.year') }}, {{ config()->get('custom.information.name') }}.</small>
            </div>
        </div>
    </div>
@endsection