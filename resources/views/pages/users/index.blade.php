@extends('layouts.master')

@section('title')
    {{ trans('pages.users.title') }}
@endsection

@section('container')
	<h2 class="page-title">{{ trans('pages.users.title') }} <small>{{ trans('pages.users.description') }}</small>
		<a href="{{ route('pages.users.create') }}" class="btn btn-sm pull-right btn-primary"><span class="fa fa-plus"></span> {{ trans('pages.users_create.title') }}</a>
	</h2>

	@include('errors.validation')

	<section class="widget">
        <div class="widget-table-overflow">
			<table class="table table-striped table-lg mt-lg mb-0">
			    <thead class="no-bd">
			    <tr>
			        <th>
			            <div class="checkbox">
			                <input id="users-chck" type="checkbox" data-check-all>
			                <label for="users-chck"></label>
			            </div>
			        </th>
			        <th>{{ trans('pages.users.forms.name') }}</th>
			        <th>{{ trans('pages.users.forms.email') }}</th>
			        <th class="hidden-xs">{{ trans('pages.users.forms.access') }}</th>
			        <th class="hidden-xs">{{ trans('pages.users.forms.company_id') }}</th>
			        <th class="col-md-2"></th>
			    </tr>
			    </thead>
			    <tbody>

			    	@forelse($users as $user)

				    <tr>
				        <td>
				            <div class="checkbox">
				                <input id="users-chck-{{ $user->id }}" type="checkbox" data-check-all>
				                <label for="users-chck-{{ $user->id }}"></label>
				            </div>
				        </td>
				        <td><a href="{{ route('pages.users.show', [ $user->id ]) }}">{{ $user->name }}</a></td>
				        <td>{{ $user->email }}</td>
				        <td class="hidden-xs">{{ $user->roles[0]->name }}</td>
				        <td class="hidden-xs">{{ $user->company->name }}</td>
				        <td>
				        	<form class="pull-right" id="user-form-delete-{{ $user->id }}" method="POST" action="{{ route('pages.users.destroy', [ $user->id ]) }}">
				        		<input type="hidden" name="_method" value="DELETE">
				        		<input type="hidden" name="_token" value="{{ csrf_token() }}">
				        		<button type="submit" class="btn btn-danger btn-sm"><span class="fa fa-trash"></span> {{ trans('pages.users.forms.delete') }}</button>
				        	</form>
				        	<a class="btn btn-sm btn-warning pull-right" href="{{ route('pages.users.edit', [ $user->id ]) }}" style="margin-right:5px;"><span class="fa fa-pencil"></span> {{ trans('pages.users.forms.edit') }}</a>
				        </td>
				    </tr>

				    @empty

				    <tr><td colspan="4" class="text-center"><b>{{ trans('pages.users.forms.no_results') }}</b>	</td></tr>

				    @endforelse
			    </tbody>
			</table>
		</div>
	</section>
@endsection